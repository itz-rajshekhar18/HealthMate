# Export & Share Functionality Guide

## Overview
The Export PDF page now has two main actions:
1. **Download PDF** - Downloads the health report as a file
2. **Share Report** - Opens platform-specific sharing options

## How It Works

### Mobile Devices (iOS/Android)

When you tap the **"Share Report"** button on mobile:
1. Native share dialog opens automatically
2. You can share via:
   - WhatsApp
   - Email
   - SMS/Messages
   - Social media apps
   - Any app that supports sharing
3. The share includes:
   - Report summary text
   - Report period information
   - Total records count

**Example Share Message:**
```
Check out my Health Report from HealthMate!

Report Period: Last 30 days
Total Records: 15

Generated by HealthMate App
```

### Web Platform

When you click the **"Share Report"** button on web:
1. A modal popup appears with a shareable link
2. The link is displayed in a copy-friendly format
3. Click **"Copy Link"** to copy to clipboard
4. Share the link via:
   - Email
   - Messaging apps (WhatsApp Web, Telegram, etc.)
   - Social media
   - Any communication platform

**Modal Features:**
- Clean, centered popup design
- Shareable link display
- One-click copy button
- Close button (X) to dismiss
- Click outside to close

## Button Behavior

### Download PDF Button (Blue)
- Downloads HTML report on web
- Saves/shares PDF file on mobile
- Shows loading spinner while generating
- Disabled when no data available

### Share Report Button (Green)
- Opens native share on mobile
- Shows link modal on web
- Shows loading spinner while preparing
- Disabled when no data available

## Technical Details

### Mobile Implementation
```typescript
// Uses React Native's Share API
Share.share({
  message: 'Report summary...',
  title: 'Health Report',
});
```

### Web Implementation
```typescript
// Generates shareable link
const reportUrl = `${window.location.origin}/health-report/${timestamp}`;
// Shows modal with copy functionality
navigator.clipboard.writeText(shareLink);
```

### Dependencies
- `expo-clipboard` - For copying links to clipboard
- React Native `Share` API - For native sharing on mobile
- `Modal` component - For web share popup

## User Experience

### Success States
- Mobile: "Report shared successfully!" alert
- Web: "Link copied to clipboard!" alert

### Error States
- No data: "No vitals data available for the selected period"
- Share failed: "Failed to share report: [error message]"
- Copy failed: "Failed to copy link"

### Loading States
- Button shows spinner and "Generating..." text
- Both buttons disabled during generation
- Modal doesn't appear until data is ready

## Future Enhancements

Potential improvements:
1. **QR Code Generation** - Generate QR code for easy mobile sharing
2. **Email Integration** - Direct email compose with report attached
3. **Cloud Storage** - Save to Google Drive, Dropbox, etc.
4. **Social Media** - Direct sharing to Facebook, Twitter, etc.
5. **Report Expiry** - Set expiration time for shared links
6. **Password Protection** - Add password to shared reports
7. **Analytics** - Track how many times report was viewed

## Troubleshooting

### Share button not working on mobile
- Check if Share API is available on the device
- Ensure app has necessary permissions
- Try restarting the app

### Copy button not working on web
- Check browser clipboard permissions
- Try using HTTPS (required for clipboard API)
- Use manual copy if automatic fails

### Modal not appearing on web
- Check console for JavaScript errors
- Ensure modal state is being set correctly
- Verify Platform.OS detection is working

## Testing Checklist

- [ ] Download PDF works on web
- [ ] Download PDF works on mobile
- [ ] Share opens native dialog on iOS
- [ ] Share opens native dialog on Android
- [ ] Share modal appears on web
- [ ] Copy link works on web
- [ ] Modal closes on X button click
- [ ] Modal closes on outside click
- [ ] Buttons disabled when no data
- [ ] Loading states show correctly
- [ ] Success alerts appear
- [ ] Error alerts appear with details
